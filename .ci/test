#!/usr/bin/env bash

# This will set up our environment to use the freshly-installed
# QT 5.9 PPA packages
source /opt/qt59/bin/qt59-env.sh

set -e
set -x

qmake -v
qmake "CONFIG+=test" "QMAKE_CXX=g++-6" "QMAKE_LINK=g++-6" -spec linux-g++  amanuensis.pro
make
LD_LIBRARY_PATH="$LD_LIBRARY_PATH:${TRAVIS_BUILD_DIR}/core" core-test/core-test
